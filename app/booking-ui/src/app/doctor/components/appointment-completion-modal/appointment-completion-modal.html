<div
  class="modal-overlay"
  [class.open]="isOpen"
  (click)="onCancel()"
  (keyup)="onCancel()"
  tabindex="1"
>
  <div
    class="modal-container"
    (click)="$event.stopPropagation()"
    (keydown)="$event.stopPropagation()"
    tabindex="2"
  >
    <div class="modal-header">
      <h3>Complete Appointment</h3>
      <button class="close-btn" (click)="onCancel()" (keyup)="onCancel()" tabindex="3">
        <span class="material-icons">close</span>
      </button>
    </div>

    <div class="modal-body">
      <p class="patient-info">
        Patient: <strong>{{ patientName }}</strong>
      </p>

      <form (ngSubmit)="onConfirm()">
        <div class="form-group">
          <label for="diagnosis">Diagnosis <span class="required">*</span></label>
          <input
            type="text"
            id="diagnosis"
            [(ngModel)]="formData.diagnosis"
            name="diagnosis"
            placeholder="e.g. Acute Bronchitis"
            required
          />
        </div>

        <div class="form-group">
          <label for="medical-notes">Medical Notes</label>
          <textarea
            [(ngModel)]="formData.medicalNotes"
            id="medical-notes"
            name="medicalNotes"
            placeholder="Clinical observations..."
            rows="3"
          ></textarea>
        </div>

        <div class="form-group">
          <label for="treatment-plan">Treatment Plan</label>
          <textarea
            [(ngModel)]="formData.treatmentPlan"
            id="treatment-plan"
            name="treatmentPlan"
            placeholder="Rest, hydration, follow-up in 3 days..."
            rows="3"
          ></textarea>
        </div>

        <div class="form-group">
          <label for="prescribed-medications">Prescribed Medications</label>
          <textarea
            [(ngModel)]="formData.prescribedMedications"
            id="prescribed-medications"
            name="prescribedMedications"
            placeholder="Amoxicillin 500mg (1 tablet every 8 hours)..."
            rows="2"
          ></textarea>
        </div>
      </form>
    </div>

    <div class="modal-footer">
      <button class="btn-cancel" (click)="onCancel()">Cancel</button>
      <button class="btn-confirm" (click)="onConfirm()">
        <span class="material-icons">check_circle</span> Complete Appointment
      </button>
    </div>
  </div>
</div>
