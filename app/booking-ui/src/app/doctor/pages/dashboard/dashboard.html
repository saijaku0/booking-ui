<div class="dashboard-container">
  <div class="page-header">
    <div class="header-titles">
      <h2>Dashboard</h2>
      <p class="subtitle">Welcome back, Dr. {{ doctorFullName() }}</p>
    </div>
  </div>

  @if (doctorService.currentDoctorId(); as docId) {
    <app-stats-cards [doctorId]="docId"></app-stats-cards>

    <div class="table-section">
      <h3 class="section-title">Appointments Schedule</h3>

      <app-appointments-table
        [appointments]="appointments()"
        [isLoading]="isLoading()"
        (action)="handleTableAction($event)"
      ></app-appointments-table>
    </div>
  }
</div>

<app-completion-modal
  [isOpen]="isCompleteModalOpen()"
  [patientName]="selectedPatientName()"
  (closeModal)="closeModal()"
  (confirm)="onCompleteConfirm($any($event))"
></app-completion-modal>

<app-reschedule-modal
  [isOpen]="isRescheduleModalOpen()"
  (close)="isRescheduleModalOpen.set(false)"
  (confirm)="onRescheduleConfirm($event)"
></app-reschedule-modal>

<app-appointment-details-modal
  [appointmentId]="selectedDetailsId()"
  [isOpen]="isDetailsOpen()"
  (close)="isDetailsOpen.set(false)"
></app-appointment-details-modal>
