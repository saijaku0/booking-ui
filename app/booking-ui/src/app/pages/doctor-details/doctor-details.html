<div class="details-container">
  @if (isLoading()) {
    <div class="loading-state">
      <div class="spinner"></div>
      <p>Loading doctor profile...</p>
    </div>
  } @else if (doctor(); as doc) {
    <div class="content-grid">
      <div class="main-content">
        <app-doctor-info [doctor]="doc" />

        <app-doctor-reviews
          [reviews]="reviews()"
          [user]="currentUser()"
          [isSubmitting]="isSubmittingReview()"
          (submitReview)="submitReview($event)"
        />
      </div>

      <div class="sidebar">
        <app-doctor-booking
          [slots]="availableSlots()"
          [selectedDate]="selectedDate()"
          [isLoadingSlots]="isLoadingSlots()"
          [isBooking]="isBooking()"
          (dateChange)="selectedDate.set($event)"
          (confirmBooking)="bookAppointment($event)"
        />
      </div>
    </div>
  } @else {
    <div class="error-state">
      <span class="material-icons">error_outline</span>
      <p>Doctor not found.</p>
      <a routerLink="/" class="back-link">Go back to home</a>
    </div>
  }
</div>
